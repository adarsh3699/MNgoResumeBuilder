<html>
<head>
	<title>MNgo Resume Builder</title>
	<link rel="icon" href="images/logo.png" />

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/scroll.css">
	<link rel="stylesheet" type="text/css" href="css/theme.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">

	<meta name="viewport" content="width=device-width, initial-scale= 1">	
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="language" content="English">
	<meta name="author" content="Aditya Suman">	
</head>

<body>
<!---------preloader area------->
	<div class="preloader_container"></div>

<!-------main window--------->
	<div class="container-fluid"  id="main_window">
		<div class="row">
		<!------left page----->
			<div class="col-sm-9 text-center" id="left">
				<div id="page" class="verdana-sans" contenteditable="true" style="line-height: 1.3em; padding: 0cm .25cm .25cm">
					
					<div class="row" id="sectionInfo">
						<div class="col-xs-6" style="margin: 0px; padding: 0px;">
							<span id="fName">fName</span> <span id="sName">sName</span>
							<ul class="light plain_list" id="contactLink" ><li>contactLink</li></ul>
						</div>

						<ul class="col-xs-6 plain_list light" id="contacts" style="text-align: right; margin: 0px; padding: 0px;">
							<li>contacts</li>
						</ul>
					</div>
				
					<div class="section" id="sectionEducation">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Education</strong></h4>
							<hr class="hr-below">
						</div>
						<table class="table customBordered" id="educationTable" style="margin-top: 3px; margin-bottom: 5px; ">
							<thead style="font-size: 87%;">
								<tr>
									<td class="header"><strong>Year</strong></td>
									<td class="header"><strong>Degree / Certificate</strong></td>
									<td class="header"><strong>Institute / Board</strong></td>
									<td class="header"><strong>CGPA/Percentage</strong></td>
								</tr>
							</thead>
							<tbody id="education">
							</tbody>
						</table>
					</div>


					<div class="section" id="sectionExperience">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Experience</strong></h4>
							<hr class="hr-below">
						</div>
						<ul style="padding-left: 30px;" class="disc" id="experience">
						</ul>
					</div>


					<div class="section" id="sectionPublications" style="display: none;">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Publications</strong></h4>
							<hr class="hr-below">
						</div>
						<ul id="publications">
						</ul>
					</div>


					<div class="section" id="sectionProjects">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Projects</strong></h4>
							<hr class="hr-below">
						</div>
						<ul style="padding-left: 30px;" id="projects" class="disc">
						</ul>
					</div>

				
					<div class="section" id="sectionSkills">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Technical skills</strong></h4>
							<hr class="hr-below">
						</div>
						<ul style="padding-left: 10px;" id="skills">
						</ul>
					</div>


					<div class="section" id="sectionResponsibility">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Positions of Responsibility</strong></h4>
							<hr class="hr-below">
						</div>
						<ul style="padding-left: 10px;" id="pors">
						</ul>
					</div>


					<div class="section" id="sectionAchievements">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Achievements</strong></h4>
							<hr class="hr-below">
						</div>
						<ul style="padding-left: 10px;" id="achievements">
						</ul>
					</div>

				
					<div class="section" id="sectionCourses" style="display: none;">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Key courses taken</strong></h4>
							<hr class="hr-below">
						</div>
						<ul id="courses">
						</ul>
					</div>

				
					<div class="section" id="sectionCurricular" style="display: none;">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h4><strong>Extra-curriculars</strong></h4>
							<hr class="hr-below">
						</div>
						<ul id="cirrculars">
							<li>
								<span class="title">ABC workshop : </span>
								<span class="text">Attended a 3-day workshop on Image sensing satellute development.</span>
							</li>
						</ul>
					</div>

					<div class="section" id="sectionFooterMessage" style="display: none;">
						<div class="section-title rule-above ruled">
							<hr class="hr-above">
							<h6 style="margin-left: 20px; "><strong id="footerMsg">your footer message</strong></h6>
						</div>
					</div>
				</div>
			</div>
		
		<!------right panel----->
			<div class="col-sm-3 no-print" id="right">
				<div id="panel">
					<button class="btn btn-block btn-success" id="save_btn" >Save</button>
					<button class="btn btn-block btn-primary" onclick="window.print()">Print PDF</button>
					<a class="btn btn-block btn-primary" href="resume_pdf.php" target="_blank">View PDF</a>

					<a class="btn btn-block btn-warning" href="extra/data.json" target="_blank" download>Export JSON</a>
					
					<h5 class="btn btn-info" style="width: 100%; padding: 5px;">
						Import JSON
						<div>
							<input type="file" name="file1" id="file1">	
						</div>
					</h5>
					<hr>
					
					<div id="customTemplateOptions" style="display: block;">
						<h5>
							Horizontal margin
							<div class="toggle-button hor_marg">
								<div class="toggle-option" data-toggle="margin" id="margin0">0</div>
								<div class="toggle-option selected" data-toggle="margin" id="margin1">1</div>
								<div class="toggle-option" data-toggle="margin" id="margin2">2</div>
								<div class="toggle-option" data-toggle="margin" id="margin3">3</div>
								<div class="toggle-option" data-toggle="margin" id="margin4">4</div>
								<div class="toggle-option" data-toggle="margin" id="margin5">5</div>
								<div class="toggle-option" data-toggle="margin" id="margin6">6</div>
							</div>
						</h5>

						<h5>
							Line spacing
							<div class="toggle-button line_spacing">
								<div class="toggle-option" data-toggle="line" id="line1">1</div>
								<div class="toggle-option" data-toggle="line" id="line2">2</div>
								<div class="toggle-option selected" data-toggle="line" id="line3">3</div>
								<div class="toggle-option" data-toggle="line" id="line4">4</div>
								<div class="toggle-option" data-toggle="line" id="line5">5</div>
								<div class="toggle-option" data-toggle="line" id="line6">6</div>
							</div>
						</h5>

						<h5>
							Title case
							<div class="toggle-button">
								<div class="toggle-option selected" data-toggle="case" id="caseNormal">Default</div>
								<div class="toggle-option" data-toggle="case" id="caseUpper">Uppercase</div>
							</div>
						</h5>
						<h5>
							Title style
							<div class="toggle-button">
								<div class="toggle-option selected" data-toggle="title" id="titleRuled">Ruled</div>
								<div class="toggle-option" data-toggle="title" id="titleShaded">Shaded</div>
							</div>
						</h5>
						<h5>
							Title rule position
							<div class="toggle-button">
								<div class="toggle-option selected" data-toggle="rule" id="ruleAbove">Above title</div>
								<div class="toggle-option" data-toggle="rule" id="ruleBelow">Below title</div>
							</div>
						</h5>
						<h5>
							Table border
							<div class="toggle-button">
								<div class="toggle-option selected" data-toggle="table" id="tableShow">Show</div>
								<div class="toggle-option" data-toggle="table" id="tableHide">Hide</div>
							</div>
						</h5>
						<br />

						<h5>
							To make text bold
							<div class="toggle-button my_button" style="cursor: default;">
								Control + B
							</div>
						</h5>

						<h5>
							To make text italic
							<div class="toggle-button my_button" style="cursor: default;">
								Control + I
							</div>
						</h5>

						<h5>
							<div class="my_button" style="cursor: default;">Note: </div> Bold/Italic will not not work everywhere, but only at places where required.
						</h5>

						
						<br />
						<center class="feed">
						</center>
					</div>
					<hr>
					
					<div>
						<h5>
							Add Education Row
							<div class="toggle-button">
								<div class="toggle-option selected add_educ_row" >First</div>
								<div class="toggle-option selected add_educ_row" >Last</div>
							</div>
						</h5>

						<h5>
							Delete Education Row
							<div class="toggle-button">
								<div class="toggle-option selected delete_educ_row" >First</div>
								<div class="toggle-option selected delete_educ_row" >Last</div>
							</div>
						</h5>

						<h5>
							Add Experience Row
							<div class="toggle-button">
								<div class="toggle-option selected add_exp_row">First</div>
								<div class="toggle-option selected add_exp_row">Last</div>
							</div>
						</h5>

						<h5>
							Add Projects Row
							<div class="toggle-button">
								<div class="toggle-option selected add_projects_row">First</div>
								<div class="toggle-option selected add_projects_row">Last</div>
							</div>
						</h5>

						<h5>
							Add Skills Row
							<div class="toggle-button">
								<div class="toggle-option selected add_skills_row">First</div>
								<div class="toggle-option selected add_skills_row">Last</div>
							</div>
						</h5>
						
						<h5>
							Add POR Row
							<div class="toggle-button">
								<div class="toggle-option selected add_por_row">First</div>
								<div class="toggle-option selected add_por_row">Last</div>
							</div>
						</h5>

						<h5>
							Add Achievements Row
							<div class="toggle-button">
								<div class="toggle-option selected add_achieve_row">First</div>
								<div class="toggle-option selected add_achieve_row">Last</div>
							</div>
						</h5>
						<br/>

						<h5>
							Publications Layout
							<div class="toggle-button">
								<div class="toggle-option publication_visibility" id="showPublication">Show</div>
								<div class="toggle-option selected publication_visibility" id="hidePublication">Hide</div>
							</div>
						</h5>

						<h5>
							Courses Layout
							<div class="toggle-button">
								<div class="toggle-option courses_visibility" id="showCourses">Show</div>
								<div class="toggle-option selected courses_visibility" id="hideCourses">Hide</div>
							</div>
						</h5>

						<h5>
							Extracurricular Layout
							<div class="toggle-button">
								<div class="toggle-option circular_visibility" id="showCurrcular">Show</div>
								<div class="toggle-option selected circular_visibility" id="hideCurrcular">Hide</div>
							</div>
						</h5>

						<h5>
							Footer 
							<div class="toggle-button">
								<div class="toggle-option footer_visibility" id="showFooter">Show</div>
								<div class="toggle-option selected footer_visibility" id="hideFooter">Hide</div>
							</div>
						</h5>
						<br/>

						<h5>
							Education year column
							<div class="toggle-button eduYearLayout">
								<div class="toggle-option selected" data-toggle="edyear" id="edyearFirst">First</div>
								<div class="toggle-option" data-toggle="edyear" id="edyearLat">Last</div>
							</div>
						</h5>

						<h5>
							Experience layout
							<div class="toggle-button">
								<div class="toggle-option selected" data-toggle="experience" id="experience1">L1</div>
								<div class="toggle-option" data-toggle="experience" id="experience2">L2</div>
							</div>
						</h5>

						<h5>
							Projects layout
							<div class="toggle-button">
								<div class="toggle-option selected" data-toggle="projects" id="projects1">L1</div>
								<div class="toggle-option" data-toggle="projects" id="projects2">L2</div>
							</div>
						</h5>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="sectionToggleModal" tabindex="-1" style="display: none;">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<button type="button" class="close" data-dismiss="modal">Ã—</button>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" checked="true" value="sectionEducation">Education</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" checked="true" value="sectionExperience">Experience</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" value="sectionPublications">Publications</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" checked="true" value="sectionProjects">Projects</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" checked="true" value="sectionSkills">Technical Skills</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" checked="true" value="sectionResponsibility">Positions of Responsibility</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" checked="true" value="sectionAchievements">Achievements</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" value="sectionCourses">Key courses taken</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" value="sectionCurricular">Extra curriculars</label></div>
					<div class="checkbox"><label><input type="checkbox" name="sectionToggle" value="sectionFooterMessage">References message</label></div>
				</div>
			</div>
		</div>
	</div>

<!---------scripts-------->
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
	<script type="text/javascript">
	//by-passing password verification for local server/host	
		var website = window.location.host;

		password_verify_url = "../resume_api/verify_user.php";
		if( website == "localhost:8080" || website == "localhost" ) {
			password_verify_url = "extra/verify_user.php";
		}

	//displaying preloader
		$('.preloader_container').load('extra/preloader.html');

	//removing context menu
		document.addEventListener('contextmenu', event => event.preventDefault());

	//getting the stored data from data.json file
		var time = Math.floor(Date.now() / 1000);
		var url = "extra/data.json?v=" + time; // to always load from latest data.json i.e this prevents loading from cache of data.json

		$.ajax({
	        type: "GET",
	        url: url,
	        dataType: "json",
	        success: function(data) {
	        //if some data exist
	        	if(data) {
	        		var jsonData = data[0];
	            	updateUI(jsonData);
	        	}
	        },
	        error: function (xhr, ajaxOptions, thrownError) {
	        //if data.json does not exist then creating a blank data.json and reloading the page
	        	if(thrownError == "Not Found") {
	        		$.post("extra/write_json.php", { jsonToSend: "[{}]" }, function(resp)
					{
						if(resp == 1) {
							$('#loading_msg').text("Blank data created").css("color", "#5cb85c");
							location.reload();
						} else if( resp == 0) {
							$('#loading_msg').text("Failed to write in external file data.json. Please check your folder permission").css("color", "red");
						} else if( resp == -100 ) {
							$('#loading_msg').text("Failed to open external file data.json").css("color", "red");
						} else {
							$('#loading_msg').text("Unknown error").css("color", "red");
							console.log(resp);
						}
					});
	        	}
	        	else {
	        	//displaying error in preloader
		        	$('#loading_msg').text("Something went wrong while fetching data from storage file data.json: " + thrownError).css("color", 'red');
	        	}
	      	}
	    });

	//function to update UI from data fetched from json file
		function updateUI(json) 
		{
			if( json ) 
			{
				var page_style = "";

			//if valid json
				for (var key in json) 
				{
			   //getting val from json	
			    	var val = json[key];

			    //generating html for different titles
			    	var html = "";
			    	if(key == "contactLink") {
			    	//setting data
			    		var data = val;

			    		for(i in data) {
		    				var did_this = data[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
			    	} else if(key == "contacts") {
			    	//setting data
			    		var data = val;

			    		for(i in data) {
		    				var did_this = data[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
			    	} else if(key == "education") {
			    	//setting heading
			    		var heading = val.heading;
			    		$('#sectionEducation h4 strong').text(heading);

			    	//setting data
			    		var data = val.data;
			    		for(var k in data) {
			    			var year = data[k].year;
			    			var degree = data[k].degree;
			    			var institute = data[k].institute;
			    			var grade = data[k].grade;

			    			html += "<tr><td>" + year + "</td><td>" + degree + "</td><td>" + institute + "</td><td>" + grade + "</td></tr>";
			    		}
			    	} else if(key == "experience") {
			    	//setting heading
			    		var heading = val.heading;
			    		$('#sectionExperience h4 strong').text(heading);
			    		// console.log(heading);

			    	//setting data
			    		var data = val.data;
			    		for(var k in data) {
			    			var job_title = data[k].job_title;
			    			var job_duration = data[k].job_duration;
			    			var job_company_link = data[k].job_company_link;
			    			var company_name = data[k].company_name;
			    			var details = data[k].details;

			    			html += '<li class="li"><div><div class="title">' + job_title + '</div><div class="time right" >' + job_duration + '</div></div><div><div class="link right">' + job_company_link + '</div><div class="company_name">' + company_name + '</div><ul class="circle" style="margin-left: 0px; padding-left: 25px;">';

		    				for(var i in details) {
			    				var did_this = details[i];

			    				html += "<li>" + did_this + "</li>"
			    			}
			    			
			    			html += "</ul></div></li>";
			    		}
			    	} else if(key == "projects") {
			    	//setting heading
			    		var heading = val.heading;
			    		$('#sectionProjects h4 strong').text(heading);
			    		// console.log(heading);
			    		
			    	//setting data
			    		var data = val.data;
			    		for(var k in data) {
			    			var project_title = data[k].project_title;
			    			var project_duration = data[k].project_duration;
			    			var project_link = data[k].project_link;
			    			var company_name = data[k].company_name;
			    			var details = data[k].details;

			    			html += '<li class="li"><div><div class="title">' + project_title + '</div><div class="time right" >' + project_duration + '</div></div><div><div class="link right">' + project_link + '</div><div class="company_name">' + company_name + '</div><ul class="circle" style="margin-left: 0px; padding-left: 25px;">';
			    			for(var i in details) {
			    				var did_this = details[i];

			    				html += "<li>" + did_this + "</li>"
			    			}
			    			html += "</ul></div></li>";
			    		}
			    	} else if(key == "skills") {
			    	//setting heading
			    		var heading = val.heading;
			    		$('#sectionSkills h4 strong').text(heading);
			    		// console.log(heading);
			    		
			    	//setting data
			    		var data = val.data;
			    		for(var i in data) {
		    				var did_this = data[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
		    		} else if(key == "pors") {
		    		//setting heading
			    		var heading = val.heading;
			    		$('#sectionResponsibility h4 strong').text(heading);
			    		// console.log(heading);
			    		
			    	//setting data
			    		var data = val.data;
			    		for(i in data) {
		    				var did_this = data[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
		    		} else if(key == "achievements") {
		    		//setting heading
			    		var heading = val.heading;
			    		$('#sectionAchievements h4 strong').text(heading);
			    		// console.log(heading);
			    		
			    	//setting data
			    		var data = val.data;
			    		for(i in data) {
		    				var did_this = data[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
		    		} else if(key == "publications") {
		    		//setting heading
			    		var heading = val.heading;
			    		$('#sectionPublications h4 strong').text(heading);
			    		// console.log(heading);
			    		
			    	//setting data
			    		var data = val.data;
			    		for(var k in data) {
			    			var publication_title = data[k].publication_title;
			    			var published_at = data[k].published_at;
			    			var mentors = data[k].mentors;

			    			html += '<li><div><div class="title">' + publication_title + '</div><div class="time right">' + published_at + '</div></div><div><div class="mentor">' + mentors + '</div></div></li>';
			    		}
			    	} else if(key == "courses") {
		    		//setting heading
			    		var heading = val.heading;
			    		$('#sectionCourses h4 strong').text(heading);
			    		// console.log(heading);
			    		
			    	//setting data
			    		html += '<div class="row"><div class="col-sm-6 data1">';
			    		var data1 = val.data1;
			    		for(i in data1) {
		    				var did_this = data1[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
		    			html += '</div><div class="col-sm-6 data2">';

			    		var data2 = val.data2;
			    		for(i in data2) {
		    				var did_this = data2[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
		    			html += '</div></div>';

		    			var note = val.note;
						html += '<div class="star light"><i>' + note + '</i></div>';			    			
			    	} else if(key == "cirrculars") {
		    		//setting heading
			    		var heading = val.heading;
			    		$('#sectionCurricular h4 strong').text(heading);
			    		// console.log(heading);
			    		
			    	//setting data
			    		var data = val.data;
			    		for(i in data) {
		    				var did_this = data[i];

		    				html += "<li>" + did_this + "</li>"
		    			}
		    		} else if(key == "isImageVisible") {
		    			if( val == true ) {
		    				$('#image_box').css("display", "block");

		    				$('#imageShow').addClass("selected");
		    				$('#imageHide').removeClass("selected");
		    			} else {
		    				$('#image_box').css("display", "none");

		    				$('#imageHide').addClass("selected");
		    				$('#imageShow').removeClass("selected");
		    			}
		    		} else if(key == "publicationVisibility") {
		    			if( val == true ) {
		    				$('#sectionPublications').css('display', "block");

		    				$('#showPublication').addClass("selected");
		    				$('#hidePublication').removeClass("selected");
		    			} else {
		    				$('#sectionPublications').css("display", "none");

		    				$('#hidePublication').addClass("selected");
		    				$('#showPublication').removeClass("selected");
		    			}
		    		} else if(key == "coursesVisibility") {
		    			if( val == true ) {
		    				$('#sectionCourses').css('display', "block");

		    				$('#showCourses').addClass("selected");
		    				$('#hideCourses').removeClass("selected");
		    			} else {
		    				$('#sectionCourses').css("display", "none");

		    				$('#hideCourses').addClass("selected");
		    				$('#showCourses').removeClass("selected");
		    			}
		    		} else if(key == "currcularVisibility") {
		    			if( val == true ) {
		    				$('#sectionCurricular').css('display', "block");

		    				$('#showCurrcular').addClass("selected");
		    				$('#hideCurrcular').removeClass("selected");
		    			} else {
		    				$('#sectionCurricular').css("display", "none");

		    				$('#hideCurrcular').addClass("selected");
		    				$('#showCurrcular').removeClass("selected");
		    			}
		    		} else if(key == "footerVisibility") {
		    			if( val == true ) {
		    				$('#sectionFooterMessage').css('display', "block");

		    				$('#showFooter').addClass("selected");
		    				$('#hideFooter').removeClass("selected");
		    			} else {
		    				$('#sectionFooterMessage').css("display", "none");

		    				$('#hideFooter').addClass("selected");
		    				$('#showFooter').removeClass("selected");
		    			}
		    		} else if(key == "eduYearLayout") {
		    			if( val == "Last" ) {
		    				educYearLayout("edyearLat");

		    				$('#edyearLat').addClass("selected");
		    				$('#edyearFirst').removeClass("selected");
		    			} else {
		    			// by default it is at first //so nothing is required
		    			}
		    		} else if(key == "padding") {
		    			page_style += "padding: " + val + "; ";

		    		//de-highlihting prevoiusly selected button
		    			$('.hor_marg .toggle-option').each(function(){
	    					$(this).removeClass("selected");
	    				});

		    		//hightlightinhg selectd btn
		    			if(val == "0cm") {
		    				$('#margin0').addClass("selected");
		    			} else if (val == "0cm 0.25cm 0.25cm") {
		    				$('#margin1').addClass("selected");
		    			} else if (val == "0cm 0.5cm 0.5cm") {
		    				$('#margin2').addClass("selected");
		    			} else if (val == "0cm 0.75cm 0.75cm") {
		    				$('#margin3').addClass("selected");
		    			} else if (val == "0cm 1cm 1cm") {
		    				$('#margin4').addClass("selected");
		    			} else if (val == "0cm 1.1cm 1.1cm") {
		    				$('#margin5').addClass("selected");
		    			} else if (val == "0cm 1.3cm 1.3cm") {
		    				$('#margin6').addClass("selected");
		    			}
		    		} else if(key == "line_height") {
		    			page_style += "line-height: " + val + "; ";

	    			//de-highlihting prevoiusly selected button
		    			$('.line_spacing .toggle-option').each(function(){
	    					$(this).removeClass("selected");
	    				});

		    		//hightlightinhg selectd btn
		    			if(val == "1.1em") {
		    				$('#line1').addClass("selected");
		    			} else if (val == "1.2em") {
		    				$('#line2').addClass("selected");
		    			} else if (val == "1.3em") {
		    				$('#line3').addClass("selected");
		    			} else if (val == "1.4em") {
		    				$('#line4').addClass("selected");
		    			} else if (val == "1.5em") {
		    				$('#line5').addClass("selected");
		    			} else if (val == "1.6em") {
		    				$('#line6').addClass("selected");
		    			}
		    		} else if(key == "case") {
		    			if(val == "uppercase") {
		    				$('.section-title').addClass('uppercase');

		    				$('#caseNormal').removeClass("selected");
		    				$('#caseUpper').addClass("selected");
		    			}
		    		} else if(key == "isShaded") {
		    			if(val == true) {
		    				$('.section-title').removeClass('ruled');
							$('.section-title').addClass('shaded');

		    				$('#titleRuled').removeClass("selected");
		    				$('#titleShaded').addClass("selected");
		    			}
		    		} else if(key == "rulerPosition") {
		    			if(val == "below") {
		    				$('.section-title').removeClass('rule-above');
							$('.section-title').addClass('rule-below');

		    				$('#ruleAbove').removeClass("selected");
		    				$('#ruleBelow').addClass("selected");
		    			}
		    		} else if(key == "tableBorder") {
		    			if(val == false) {
		    				$('#educationTable').removeClass('customBordered');
							$('#educationTable').addClass('borderless');

		    				$('#tableShow').removeClass("selected");
		    				$('#tableHide').addClass("selected");
		    			}
			    	} else if(key == "footerMsg" || key == "fName" || key == "sName") {
			    		var html = val.replace("\n", "<br />"); // to break word
			    	} else {
			    	//ignoring any other key
			    		continue;
			    	}

		    	//updating UI
			       	$('#' + key).html(html);
				}

			//setting page style horizontal margin & line spacing
				if($.trim(page_style) != "") {
					$('#page').attr("style", page_style);
				}

	        //removing preloader
	            setTimeout(function()
				{
					$('.preloader_container').css('z-index', '100').slideUp(200);
				}, 200);
			}
		}

	//on clicking on add educ_row btn
		$('.add_educ_row').on("click", function()
		{
			var text = $.trim($(this).text());
			
			var sampleHTML = '<tr><td class="header"><strong>Year</strong></td><td class="header"><strong>Degree / Certificate</strong></td><td class="header"><strong>Institute / Board</strong></td><td class="header"><strong>CGPA/Percentage</strong></td></tr>';
		
			if( text == "First" ) {
				var html = sampleHTML;
				html += $('#education').html();

				$('#education').html(html);
			} else if ( text == "Last" ) {
				$('#education').append(sampleHTML);
			}
		});
	
	//on clicking on delete education row btn
		$('.delete_educ_row').on("click", function()
		{
			var text = $.trim($(this).text());

			if( text == "First" ) {
				$('#education tr:nth-child(1)').remove();
			} else if ( text == "Last" ) {
				$('#education tr:last-child').remove();
			}
		});

	//on clicking on add experince btn
		$('.add_exp_row').on("click", function()
		{
			var text = $.trim($(this).text());

			var sampleHTML = '<li class="li"><div><div class="title">job_title</div><div class="time right" >job_duration</div></div><div><div class="link right">job_company_link</div><div class="company_name">company_name</div><ul class="circle" style="margin-left: 0px; padding-left: 25px;"><li>did this did that</li><li>did this too</li></ul></div></li>';

			if( text == "First" ) {
				var html = sampleHTML;
				html += $('#experience').html();
				
				$('#experience').html(html);
			} else if ( text == "Last" ) {
				$('#experience').append(sampleHTML);
			}
		});

	//on clicking on add proejcts btn
		$('.add_projects_row').on("click", function()
		{
			var text = $.trim($(this).text());

			var sampleHTML = '<li class="li"><div><div class="title">project_title</div><div class="time right" >project_duration</div></div><div><div class="link right">project_link</div><div class="company_name">company_name/project guide</div><ul class="circle" style="margin-left: 0px; padding-left: 25px;"><li>did this did that</li><li>did this too</li></ul></div></li>';

			if( text == "First" ) {
				var html = sampleHTML;
				html += $('#projects').html();
				
				$('#projects').html(html);
			} else if ( text == "Last" ) {
				$('#projects').append(sampleHTML);
			}
		});

	//on clicking on add skills btn
		$('.add_skills_row').on("click", function()
		{
			var text = $.trim($(this).text());

			var sampleHTML = '<li><b>skill type: </b>skill 1, skill 2';

			if( text == "First" ) {
				var html = sampleHTML;
				html += $('#skills').html();
				
				$('#skills').html(html);
			} else if ( text == "Last" ) {
				$('#skills').append(sampleHTML);
			}
		});
		
	//on clicking on add por btn
		$('.add_por_row').on("click", function()
		{
			var text = $.trim($(this).text());

			var sampleHTML = '<li>write por post, location (duration)';

			if( text == "First" ) {
				var html = sampleHTML;
				html += $('#pors').html();
				
				$('#pors').html(html);
			} else if ( text == "Last" ) {
				$('#pors').append(sampleHTML);
			}
		});
		
	//on clicking on add achievements btn
		$('.add_achieve_row').on("click", function()
		{
			var text = $.trim($(this).text());

			var sampleHTML = '<li><b>achievement at:</b> graded A + here';

			if( text == "First" ) {
				var html = sampleHTML;
				html += $('#achievements').html();
				
				$('#achievements').html(html);
			} else if ( text == "Last" ) {
				$('#achievements').append(sampleHTML);
			}
		});
		
	//when publication visibility is changed
		$('.publication_visibility').on("click", function()
		{
			var text = $.trim($(this).text());

			toogle_publication_visibility(text);
		});

		function toogle_publication_visibility (to_do) {
			if(to_do == "Show") {
				$('#sectionPublications').css("display", "block");
			} else if(to_do == "Hide") {
				$('#sectionPublications').css("display", "none");
			}

			$(this).addClass('selected');
		}

	//when courses visibility is changed
		$('.courses_visibility').on("click", function()
		{
			var text = $.trim($(this).text());

			toogle_courses_visibility(text);
		});

		function toogle_courses_visibility (to_do) {
			if(to_do == "Show") {
				$('#sectionCourses').css("display", "block");
			} else if(to_do == "Hide") {
				$('#sectionCourses').css("display", "none");
			}

			$(this).addClass('selected');
		}

	//when extr-curricular visibility is changed
		$('.circular_visibility').on("click", function()
		{
			var text = $.trim($(this).text());

			toogle_circular_visibility(text);
		});

		function toogle_circular_visibility (to_do) {
			if(to_do == "Show") {
				$('#sectionCurricular').css("display", "block");
			} else if(to_do == "Hide") {
				$('#sectionCurricular').css("display", "none");
			}

			$(this).addClass('selected');
		}

	//when footer visibility is changed
		$('.footer_visibility').on("click", function()
		{
			var text = $.trim($(this).text());

			toogle_footer_visibility(text);
		});

		function toogle_footer_visibility (to_do) {
			if(to_do == "Show") {
				$('#sectionFooterMessage').css("display", "block");
			} else if(to_do == "Hide") {
				$('#sectionFooterMessage').css("display", "none");
			}

			$(this).addClass('selected');
		}
	
	//function to change education year layout
		function educYearLayout(toggleValue) {
			if(toggleValue=='edyearFirst')
			{
				$("#educationTable tr").each(function () {
					$(this).find("td").eq(0).before($(this).find("td").eq(3));
				});
			}
			else
			{
				$("#educationTable tr").each(function () {
					$(this).find("td").eq(3).after($(this).find("td").eq(0));
				});
			}
		}

	//on clicking on save btn
		$('#save_btn').on("click", function()
		{
			$('.feed').html('<img src="images/loaders2.gif" class="loading_gif" />');

			var jsonToSend = [];
			var jsonToStore = {};

		//getting image data
			var imageVisibility = $('#image_box').css('display');
			if( imageVisibility == "none" ) {
				jsonToStore['isImageVisible'] = false;
			} else if ( imageVisibility == "block" ) {
				jsonToStore['isImageVisible'] = true;
			}

		//getting first name
			var html = $('#fName').html();
			jsonToStore['fName'] = html;
			
		//getting second name
			var html = $('#sName').html();
			jsonToStore['sName'] = html;
			
		//getting contact links
			var dataJSON = [];
			$('#contactLink li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			jsonToStore['contactLink'] = dataJSON;
			
		//getting contacts
			var dataJSON = [];
			$('#contacts li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			jsonToStore['contacts'] = dataJSON;
			
		//getting education
			var childJSON = {};
			childJSON["heading"] = $('#sectionEducation h4 strong').text().trim(); 
			
			var dataJSON = [];
			$('#education tr').each(function()
			{
				var degree = "";
				var institute = "";
				var grade = "";
				var year = "";

			//if year is displayed at last
				if($('#edyearLat').hasClass("selected")) {
					degree = $(this).find("td:nth-child(1)").text().trim();
					institute = $(this).find("td:nth-child(2)").text().trim();
					grade = $(this).find("td:nth-child(3)").text().trim();
					year = $(this).find("td:nth-child(4)").text().trim();
				} else {
					year = $(this).find("td:nth-child(1)").text().trim();
					degree = $(this).find("td:nth-child(2)").text().trim();
					institute = $(this).find("td:nth-child(3)").text().trim();
					grade = $(this).find("td:nth-child(4)").text().trim();
				}

				var temp = {};
				temp["year"] = year;
				temp["degree"] = degree;
				temp["institute"] = institute;
				temp["grade"] = grade;

				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;

			jsonToStore['education'] = childJSON;

		//getting experience
			var childJSON = {};
			childJSON["heading"] = $('#sectionExperience h4 strong').text().trim(); 

			var dataJSON = [];
			$('#experience .li').each(function()
			{
				var temp = {};

				var job_title = $(this).find(".title").text().trim();
				var job_duration = $(this).find(".time").text().trim();
				var job_company_link = $(this).find(".link").text().trim();
				var company_name = $(this).find(".company_name").text().trim();

				temp["job_title"] = job_title;
				temp["job_duration"] = job_duration;
				temp["job_company_link"] = job_company_link;
				temp["company_name"] = company_name;

				var detailsJSON = [];
				$(this).find(".circle li").each(function() {
					var detail = $(this).html().trim();
					detailsJSON.push(detail);
				});

				temp["details"] = detailsJSON;

				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;
			
			jsonToStore['experience'] = childJSON;

		//getting projects
			var childJSON = {};
			childJSON["heading"] = $('#sectionProjects h4 strong').text().trim(); 

			var dataJSON = [];
			$('#projects .li').each(function()
			{
				var temp = {};

				var project_title = $(this).find(".title").text().trim();
				var project_duration = $(this).find(".time").text().trim();
				var project_link = $(this).find(".link").text().trim();
				var company_name = $(this).find(".company_name").text().trim();

				temp["project_title"] = project_title;
				temp["project_duration"] = project_duration;
				temp["project_link"] = project_link;
				temp["company_name"] = company_name;

				var detailsJSON = [];
				$(this).find(".circle li").each(function() {
					var detail = $(this).html().trim();
					detailsJSON.push(detail);
				});

				temp["details"] = detailsJSON;

				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;
			
			jsonToStore['projects'] = childJSON;

		//getting skills
			var childJSON = {};
			childJSON["heading"] = $('#sectionSkills h4 strong').text().trim(); 

			var dataJSON = [];
			$('#skills li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;
			
			jsonToStore['skills'] = childJSON;

		//getting pors
			var childJSON = {};
			childJSON["heading"] = $('#sectionResponsibility h4 strong').text().trim(); 

			var dataJSON = [];
			$('#pors li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;
			jsonToStore['pors'] = childJSON;

		//getting achievements
			var childJSON = {};
			childJSON["heading"] = $('#sectionAchievements h4 strong').text().trim(); 

			var dataJSON = [];
			$('#achievements li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;
			jsonToStore['achievements'] = childJSON;

		//getting publications
			var childJSON = {};
			childJSON["heading"] = $('#sectionPublications h4 strong').text().trim(); 

			var dataJSON = [];
			$('#publications li').each(function()
			{
				var temp = {};

				var publication_title = $(this).find(".title").text().trim();
				var published_at = $(this).find(".time").text().trim();
				var mentors = $(this).find(".mentor").text().trim();

				temp["publication_title"] = publication_title;
				temp["published_at"] = published_at;
				temp["mentors"] = mentors;

				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;
			
			jsonToStore['publications'] = childJSON;

		//getting courses
			var childJSON = {};
			childJSON["heading"] = $('#sectionCourses h4 strong').text().trim(); 

			var dataJSON = [];
			$('#courses .data1 li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			childJSON["data1"] = dataJSON;

			var dataJSON = [];
			$('#courses .data2 li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			childJSON["data2"] = dataJSON;
			childJSON["note"] = $('#courses .star').text();

			jsonToStore['courses'] = childJSON;

		//getting cirrculars
			var childJSON = {};
			childJSON["heading"] = $('#sectionCurricular h4 strong').text().trim(); 

			var dataJSON = [];
			$('#cirrculars li').each(function()
			{
				var temp = $(this).html().trim();
				
				dataJSON.push(temp);
			});
			childJSON["data"] = dataJSON;
			jsonToStore['cirrculars'] = childJSON;

		//getting footer
			var html = $('#footerMsg').html();
			jsonToStore['footerMsg'] = html;
		
		//getting education year layout
			var eduYearLayout = "First";

			$('.eduYearLayout .toggle-option').each(function()
			{
				var id = $(this).attr("id");
				if( $(this).hasClass("selected") ) {
					if(id == "edyearLat") {
						eduYearLayout = "Last";
					}
				}
			});
			jsonToStore['eduYearLayout'] = eduYearLayout;

		//getting publication visibility
			var publicationVisibility = $('#sectionPublications').css('display');
			if( publicationVisibility == "none" ) {
				jsonToStore['publicationVisibility'] = false;
			} else if ( publicationVisibility == "block" ) {
				jsonToStore['publicationVisibility'] = true;
			}

		//getting courses visibility
			var coursesVisibility = $('#sectionCourses').css('display');
			if( coursesVisibility == "none" ) {
				jsonToStore['coursesVisibility'] = false;
			} else if ( coursesVisibility == "block" ) {
				jsonToStore['coursesVisibility'] = true;
			}

		//getting curcullar visibility
			var currcularVisibility = $('#sectionCurricular').css('display');
			if( currcularVisibility == "none" ) {
				jsonToStore['currcularVisibility'] = false;
			} else if ( currcularVisibility == "block" ) {
				jsonToStore['currcularVisibility'] = true;
			}

		//getting footer visibility
			var footerVisibility = $('#sectionFooterMessage').css('display');
			if( footerVisibility == "none" ) {
				jsonToStore['footerVisibility'] = false;
			} else if ( footerVisibility == "block" ) {
				jsonToStore['footerVisibility'] = true;
			}

		//getting page horizontal margin & line spacing
			var line_height = "";
			var padding = "";

			var style = $('#page').attr("style");
			var res = style.split(";");
			for( var key in res) {
				var _this_ = $.trim(res[key]);

				var _break = _this_.split(":");
				if(_this_.includes("line-height")) {
					line_height = $.trim(_break[1]);
				}
				else if (_this_.includes("padding")) {
					padding = $.trim(_break[1]);
				}
			}
			jsonToStore['line_height'] = line_height;
			jsonToStore['padding'] = padding;
			
		//getting title case
			if( $('.section-title').hasClass('uppercase') ) {
				jsonToStore['case'] = "uppercase";
			} else {
				jsonToStore['case'] = "default";
			}

		//getting title ruled/shaded
			if( $('.section-title').hasClass('shaded') ) {
				jsonToStore['isShaded'] = true;
			} else {
				jsonToStore['isShaded'] = false;
			}

		//getting title ruler position
			if( $('.section-title').hasClass('rule-below') ) {
				jsonToStore['rulerPosition'] = "below";
			} else {
				jsonToStore['rulerPosition'] = "above";
			}

		//getting table border
			if( $('#educationTable').hasClass('borderless') ) {
				jsonToStore['tableBorder'] = false;
			} else {
				jsonToStore['tableBorder'] = true;
			}

		//sending data to api for storing data in data.json	
			jsonToSend.push(jsonToStore);

		//asking password
			var resp = window.prompt("password");

		//verifying password
			if( resp != "" ) {
				$.post( password_verify_url, { password: resp }, function(resp) {
					if(resp == 1) {
					//sending rqst to write json
						$.post("extra/write_json.php", {jsonToSend: JSON.stringify(jsonToSend)}, function(resp)
						{
							if(resp == 1) {
								$('.feed').text("Saved successfully").css("color", "#5cb85c");
							} else if( resp == 0) {
								$('.feed').text("Failed to write in external file data.json").css("color", "red");
							
							} else if( resp == -100 ) {
								$('.feed').text("Failed to open external file data.json").css("color", "red");
							} else {
								$('.feed').text("Unknown error").css("color", "red");
								console.log(resp);
							}
						});
					} else if( resp == 0) {
						$('.feed').text("Wrong password").css("color", "red");
					} else if( resp == -1 ) {
						$('.feed').text("Something went wrong").css("color", "red");
					} else {
						$('.feed').text("Unknown error").css("color", "red");
						console.log(resp);
					}
				});
			} else {
				$('.feed').text("Please enter the correct password").css("color", "red");
			}
		});

	//function to upload image
		var post_address = "extra/upload_image.php";
		$(document).on('change', '#file', function()
	    {
	      	$('.feed').html('<img src="images/loaders2.gif" class="loading_gif" />');

      	//sending upload request to api 
	        var property = document.getElementById("file").files[0];
	        var image_name = property.name;
	        var image_extension = image_name.split('.').pop().toLowerCase();

	        if(image_extension == "png" || image_extension == "jpg" || image_extension == "jpeg") {
	        }
	        else {
	        	$('.feed').text("please upload a image file").css("color", 'red');
	        	return;
	        }

	        var form_data = new FormData();
			form_data.append("file", property);
			$.ajax(
			{
				url: post_address,
				method: "POST",
				data: form_data,
				contentType: false,
				cache: false,
				processData: false,
				beforeSend:function()
				{
					$('.feed').html('<img src="images/loaders2.gif" class="loading_gif" />');
				},
				success: function(data)
				{		
					if(data == 0)
					{
						$('.feed').text('Failed to upload file').css("color", 'red');
					}
					else if(data == -2)
					{
						$('.feed').text("File uploading directory not present on server").css("color", 'red');
					}
					else if(data == -1)
					{
						$('.feed').text("Something went wrong").css("color", 'red');
					}
					else if(data == 1)
					{
						$('.feed').text("Image uploaded successfully").css("color", "#5cb85c");

					//displaying the newly uploaded image
						var time = Math.floor(Date.now() / 1000);
						var img_addrs = "./images/image.png?v=" + time;
						
						$('#image_box').html('<img src="' + img_addrs + '" height="80" width="80">');
					}
					else
					{
						console.log(data);
						$('.feed').text("Unknown error").css("color", 'red');
					}
				}
			});
	    });
		
	//function to import json
		$(document).on('change', '#file1', function()
	    {
	      	$('.feed').html('<img src="images/loaders2.gif" class="loading_gif" />');

      	//sending upload request to api 
	        var property = document.getElementById("file1").files[0];
	        var image_name = property.name;
	        var image_extension = image_name.split('.').pop().toLowerCase();

	        if(image_extension == "json" || image_extension == "JSON") {
	        } else {
	        	$('.feed').text("please upload a json file").css("color", 'red');
	        	return;
	        }

        //asking password
			var resp = window.prompt("password");

		//verifying password
			if( resp != "" ) {
				$.post( password_verify_url, { password: resp }, function(resp) {
					if(resp == 1) {
					//sending rqst import json
						var post_address = "extra/import_json.php";

						var form_data = new FormData();
						form_data.append("file", property);
						$.ajax(
						{
							url: post_address,
							method: "POST",
							data: form_data,
							contentType: false,
							cache: false,
							processData: false,
							beforeSend:function()
							{
								$('.feed').html('<img src="images/loaders2.gif" class="loading_gif" />');
							},
							success: function(data)
							{
								if(data == 0)
								{
									$('.feed').text('Failed to import JSON').css("color", 'red');
								}
								else if(data == -3)
								{
									$('.feed').text("Invalid JSON format. Please upload a valid resume JSON").css("color", 'red');
								}
								else if(data == -2)
								{
									$('.feed').text("File uploading directory not present on server").css("color", 'red');
								}
								else if(data == -1)
								{
									$('.feed').text("Something went wrong").css("color", 'red');
								}
								else if(data == 1)
								{
									$('.feed').text("JSON successfully imported").css("color", "#5cb85c");
									
									location.reload();
								}
								else
								{
									console.log(data);
									$('.feed').text("Unknown error").css("color", 'red');
								}
							}
						});
					} else if( resp == 0) {
						$('.feed').text("Wrong password").css("color", "red");
					} else if( resp == -1 ) {
						$('.feed').text("Something went wrong").css("color", "red");
					} else {
						$('.feed').text("Unknown error").css("color", "red");
						console.log(resp);
					}
				});
			} else {
				$('.feed').text("Please enter the correct password").css("color", "red");
			}
	    });
	</script>
</body>
</html>